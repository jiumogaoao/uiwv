<html ng-app="app" ng-controller="controller" style="height: {{getH}}px;">
    <head>
        <meta charset="utf-8">
            <meta name="format-detection" content="telephone=no">
                <meta name="msapplication-tap-highlight" content="no">
                    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
                        <title></title>
                            <link href="css/main.css" rel="stylesheet" rev="stylesheet" type="text/css">
                            <link rel="stylesheet" href="font/iconfont.css">
                                <script type="text/javascript" src="js/angular.min.js"></script>
                                <script type="text/javascript" src="js/angular-touch.min.js"></script>
                                <style type="text/css">
                                		.space{
                                			width: 1px;
                                			height: 1px;
                                		}
                                        #main{
                                            height:88px;
                                            width:100%;
                                            background-color:#fff;
                                        }
                                .left{
                                    float:left;
                                    width:690px;
                                    height:88px;
                                    position:relative;
                                    overflow:hidden;
                                }
                                .leftRoll{
                                    -webkit-transform: translateX({{Roll*186}}px);
                                       -moz-transform: translateX({{Roll*186}}px);
                                        -ms-transform: translateX({{Roll*186}}px);
                                         -o-transform: translateX({{Roll*186}}px);
                                            transform: translateX({{Roll*186}}px);
                                    width:{{data.length*186}}px;
                                    height:88px;
                                    position:absolute;
                                    top:0px;
                                    left:0px;
                                    overflow: hidden;
                                    transition-timing-function: cubic-bezier(0.1, 0.57, 0.1, 1);
                                    transition-duration: 300ms;
                                }
                                .open .iconfont{
                                    position: absolute;
                                    top: 0px;
                                    left: 20px;
                                    font-size: 30px;
                                    line-height: 88px;
                                    color: #abadaf;
                                }
                                .open input{
                                    position: absolute;
                                    top: 0px;
                                    left: 0px;
                                    width: 690px;
                                    height: 88px;
                                    line-height: 88px;
                                    font-size: 28px;
                                    text-indent: 60px;
                                }
                                .nav{
                                    width:156px;
                                    height:88px;
                                    float:left;
                                    text-align:center;
                                    line-height:88px;
                                    margin-left:30px;
                                    font-size:30px;
                                }
                                .right{
                                    float:left;
                                    width:60px;
                                    height:88px;
                                    line-height: 98px;
                                    color: #5b99ec;
                                    font-size: 36px;
                                }
                                .cancel{
                                    width:100px;
                                    height:88px;
                                    line-height: 88px;
                                    color: #5b99ec;
                                    font-size: 36px;
                                    position: absolute;
                                    top: 0px;
                                    right: 0px;
                                    background-color: #fff;
                                    z-index: 3;
                                }
                                #maskLeft{
                                    position: absolute;
                                    top: 0px;
                                    left: 0px;
                                    z-index: 3;
                                }
                                #maskRight{
                                    position: absolute;
                                    top: 0px;
                                    right: 0px;
                                    z-index: 3;
                                }
                                .hl{
                                    width: 157px;
                                    height: 6px;
                                    border-radius: 6px;
                                    background-color: #5b99ec;
                                    position: absolute;
                                    left: 30px;
                                    bottom: 0px;
                                    transition-timing-function: cubic-bezier(0.1, 0.57, 0.1, 1);
                                    transition-duration: 300ms;
                                    -webkit-transform: translateX({{hl*186}}px);
                                       -moz-transform: translateX({{hl*186}}px);
                                        -ms-transform: translateX({{hl*186}}px);
                                         -o-transform: translateX({{hl*186}}px);
                                            transform: translateX({{hl*186}}px); 
                                }
                                </style>
    </head>
    <body style="height: {{getH}}px;">
        <div id="all" style="-webkit-transform:scale({{scale}});transform:scale({{scale}});">
            <div id="main">
            	<div class="space"></div>
            	<div ng-if="!open" class="left" ng-swipe-left="rollLeft()"  ng-swipe-right="rollRight()">
                    <img src="images/navLeft.png" id="maskLeft"/>
                    <img src="images/navRight.png" id="maskRight"/>
                    <div class="leftRoll">
                        <div class="nav" ng-repeat="n in data track by $index" ng-click="changeHl($index)">{{n.title}}</div>
                        <div class="hl"></div>
                    </div>
                </div>
                <div ng-if="!open" class="right iconfont" ng-click="toggle()">&#xe658;</div>
                <div ng-if="open" class="left open">
                    <div class="iconfont">&#xe63d;</div>
                    <input ng-model="searchData" ng-focus="searching()"/>
                </div>
                <div ng-if="open&&!serchMode" class="right iconfont" ng-click="toggle()">&#xe659;</div>
                <button ng-if="open&&serchMode" class="cancel" ng-click="cancel()">取消</button>
                <div class="clear"></div>
            </div>
        </div>
        <div class="clear"></div>
        <script type="text/javascript">
            angular.module('app', ['ngTouch']).controller('controller', ['$scope','$window','$timeout',function($scope,$window,$timeout,$swipe) {
                //自适应用
                $scope.scale = $window.innerWidth/750;
                $window.onresize=function(){
                   $scope.scale = $window.innerWidth/750;
                    $scope.getH = document.getElementById('all').clientHeight*$scope.scale;
                    $scope.$apply();
                }
                $scope.open=false;
                $scope.toggle=function(){
                    $scope.open=!$scope.open;
                                                                         window.webkit.messageHandlers.ZTX.postMessage({
                                                                                                                       fn:"bridge",
                                                                                                                       to:"webView",
                                                                                                                       action:"toggle()"
                                                                                                                       
                                                                                                                       });
                }
                $scope.hl=0;
                $scope.changeHl=function(index){
                    $scope.hl=index;
                                                                         window.webkit.messageHandlers.ZTX.postMessage({
                                                                                                                                                    fn:"bridge",
                                                                                                                       to:"webView",
                                                                                                                       action:"hl("+index+")"
                                                                                                                       
                                                                         });
                }
                $scope.Roll=0;
                $scope.rollLeft=function(){
                    if($scope.Roll>-($scope.data.length-3)){
                        $scope.Roll--;
                    }
                }
                $scope.rollRight=function(){
                    if($scope.Roll<=-1){
                        $scope.Roll++;
                    }
                }
                //数据
                $scope.data=[{id:"001",title:"冠心病"},{id:"002",title:"冠心病"},{id:"003",title:"冠心病"},{id:"004",title:"冠心病"},{id:"005",title:"冠心病"},{id:"006",title:"冠心病"},{id:"007",title:"冠心病"},{id:"008",title:"冠心病"},{id:"009",title:"冠心病"},{id:"010",title:"冠心病"},{id:"011",title:"冠心病"},{id:"011",title:"冠心病"}];
                $scope.searchData="";
                $scope.serchMode=false;
                $scope.searching=function(){
                    $scope.serchMode=true;
                                                                         window.webkit.messageHandlers.ZTX.postMessage({
                                                                                                                       fn:"bridge",
                                                                                                                       to:"webView",
                                                                                                                       action:"searching()"
                                                                                                                       
                                                                                                                       });
                }
                $scope.cancel=function(){
                    $scope.serchMode=false;
                    $scope.searchData="";
                                                                         window.webkit.messageHandlers.ZTX.postMessage({
                                                                                                                       fn:"bridge",
                                                                                                                       to:"webView",
                                                                                                                       action:"cancel()"
                                                                                                                       
                                                                                                                       });
                }
                //原生调用
                window.hl=function(num){
                                                                         $scope.hl=num;
                                                                         $scope.Roll=-1*($scope.hl-1);
                                                                         $scope.$apply();
                                                                         }
                                                                         window.set=function(data){
                                                                         $scope.data=data;
                                                                         $scope.$apply();
                                                                         }
                $timeout(function(){
                   $scope.getH = document.getElementById('all').clientHeight*$scope.scale; 
                },300);
            }]);

        </script>
    </body>
</html>
